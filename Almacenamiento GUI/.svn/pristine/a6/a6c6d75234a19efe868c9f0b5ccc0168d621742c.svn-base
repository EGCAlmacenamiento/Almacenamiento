package services;

import java.util.Collection;

import javax.transaction.Transactional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.util.Assert;

import repositories.CategoryRepository;
import security.Authority;
import utilities.DPUtils;
import domain.Category;

@Service
@Transactional
public class CategoryService {
	
	// Managed Repository ------------------------------
		@Autowired
		private CategoryRepository categoryRepository;

		// Supporting Services -----------------------------

		// Constructors ------------------------------------
		public CategoryService() {
			super();
		}

		// Simple CRUD Methods -----------------------------
		public Category create() {
			return new Category();
		}
		
		// REQ 12.4 
		// Manage the catalogue of categories, which includes creating them,
		// listing them, modifying them and deleting them.
		
		public Collection<Category> findAll() {
			Assert.isTrue(DPUtils.currentUserHasRole(Authority.ADMIN));
			return categoryRepository.findAll();
		}
		
		public void save(Category category){
			Assert.isTrue(DPUtils.currentUserHasRole(Authority.ADMIN));
			categoryRepository.save(category);
		}
		
		public void delete(Category category) {
			Assert.isTrue(DPUtils.currentUserHasRole(Authority.ADMIN));
			categoryRepository.delete(category);
		}

}
